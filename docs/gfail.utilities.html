
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>gfail.utilities &#8212; groundfailure 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="gfail.webpage" href="gfail.webpage.html" />
    <link rel="prev" title="gfail.transfer" href="gfail.transfer.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-gfail.utilities">
<span id="gfail-utilities"></span><h1>gfail.utilities<a class="headerlink" href="#module-gfail.utilities" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="gfail.utilities.is_grid_point_source">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">is_grid_point_source</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">grid</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#is_grid_point_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.is_grid_point_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Was the shakemap grid constructed with a point source?</p>
<p>This makes use of the ‘urat’ layer, which is the ratio of the predicted
ground motion standard deviation to the GMPE standard deviation. The only
reason this could ever be greater than 1.0 is if the uncertainty of the
prediction is inflated due to the point source approxmiation; further,
if a point source was used, there will always be some
locations with ‘urat’ &gt; 1.0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>grid</strong> (<em>ShakeGrid</em>) – A ShakeGrid object from MapIO.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if point rupture.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.get_event_comcat">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">get_event_comcat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">shakefile</span></em>, <em class="sig-param"><span class="n">timewindow</span><span class="o">=</span><span class="default_value">60</span></em>, <em class="sig-param"><span class="n">degwindow</span><span class="o">=</span><span class="default_value">0.3</span></em>, <em class="sig-param"><span class="n">magwindow</span><span class="o">=</span><span class="default_value">0.2</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#get_event_comcat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.get_event_comcat" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an event in comcat, searching first by event id and if that
fails searching by magnitude, time, and location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>shakefile</strong> (<em>str</em>) – path to shakemap .xml file of event to find</p></li>
<li><p><strong>timewindow</strong> (<em>float</em>) – width of time window to search around time defined
in shakefile (in seconds)</p></li>
<li><p><strong>degwindow</strong> (<em>float</em>) – width of area to search around location specified in
shakefile (in degrees).</p></li>
<li><p><strong>magwindow</strong> (<em>float</em>) – width of magnitude window to search around the
magnitude specified in shakefile.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>None if event not found, else tuple (info, detail, shakemap) where,</dt><dd><ul class="simple">
<li><p>info: json formatted dictionary of info.json for the event</p></li>
<li><p>detail: event detail from comcat</p></li>
<li><p>shakemap: shakemap of event found (from comcat)</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.parseConfigLayers">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">parseConfigLayers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">maplayers</span></em>, <em class="sig-param"><span class="n">config</span></em>, <em class="sig-param"><span class="n">keys</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#parseConfigLayers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.parseConfigLayers" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse things that need to coodinate with each layer (like lims, logscale,
colormaps etc.) from config file, in right order, where the order is from
maplayers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>maplayers</strong> (<em>dict</em>) – Dictionary containing model output.</p></li>
<li><p><strong>config</strong> (<em>ConfigObj</em>) – Config object describing options for specific
model.</p></li>
<li><p><strong>keys</strong> (<em>list</em>) – List of keys of maplayers to process, e.g. <code class="docutils literal notranslate"><span class="pre">['model']</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>(plotorder, logscale, lims, colormaps, maskthreshes) where:</dt><dd><ul class="simple">
<li><p>plotorder: maplayers keys in order of plotting.</p></li>
<li><p>logscale: list of logscale options from config corresponding to
keys in plotorder (same order).</p></li>
<li><p>lims: list of colorbar limits from config corresponding to keys
in plotorder (same order).</p></li>
<li><p>colormaps: list of colormaps from config corresponding to keys
in plotorder (same order),</p></li>
<li><p>maskthreshes: list of mask thresholds from config corresponding
to keys in plotorder (same order).</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.text_to_json">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">text_to_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#text_to_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.text_to_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Simplification of text_to_json from shakelib.rupture.factory</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input1</strong> (<em>str</em>) – url or filepath to text file</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>json formatted stream of input1</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.write_floats">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">write_floats</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">grid2d</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#write_floats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.write_floats" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a binary (with acc. header file) version of a Grid2D object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – String filename to write (i.e., ‘probability.flt’)</p></li>
<li><p><strong>grid2d</strong> (<em>Grid2D</em>) – MapIO Grid2D object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Given a filename input of “probability.flt”, this function will
create that file, plus a text file called “probability.hdr”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.savelayers">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">savelayers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">grids</span></em>, <em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#savelayers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.savelayers" title="Permalink to this definition">¶</a></dt>
<dd><p>Save ground failure layers object as a MultiHazard HDF file, preserving
metadata structures. All layers must have same geodictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grids</strong> – Ground failure layers object.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Path to where you want to save this file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>.hdf5 file containing ground failure layers</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.loadlayers">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">loadlayers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#loadlayers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.loadlayers" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a MultiHazard HDF file back in as a ground failure layers object in
active memory (must have been saved for this purpose).
:param filename: Path to layers file (hdf5 extension).
:type filename: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Ground failure layers object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.get_alert">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">get_alert</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">paramalertLS</span></em>, <em class="sig-param"><span class="n">paramalertLQ</span></em>, <em class="sig-param"><span class="n">parampopLS</span></em>, <em class="sig-param"><span class="n">parampopLQ</span></em>, <em class="sig-param"><span class="n">hazbinLS</span><span class="o">=</span><span class="default_value">[1.0, 10.0, 100.0]</span></em>, <em class="sig-param"><span class="n">popbinLS</span><span class="o">=</span><span class="default_value">[100, 1000, 10000]</span></em>, <em class="sig-param"><span class="n">hazbinLQ</span><span class="o">=</span><span class="default_value">[10.0, 100.0, 1000.0]</span></em>, <em class="sig-param"><span class="n">popbinLQ</span><span class="o">=</span><span class="default_value">[1000, 10000, 100000]</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#get_alert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.get_alert" title="Permalink to this definition">¶</a></dt>
<dd><p>Get alert levels</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>paramalertLS</strong> (<em>float</em>) – Hazard statistic of preferred landslide model</p></li>
<li><p><strong>paramalertLQ</strong> (<em>float</em>) – Hazard statistic of preferred liquefaction model</p></li>
<li><p><strong>parampopLS</strong> (<em>float</em>) – Exposure statistic of preferred landslide model</p></li>
<li><p><strong>parampopLQ</strong> (<em>float</em>) – Exposure statistic of preferred liquefaction model</p></li>
<li><p><strong>hazbinLS</strong> (<em>list</em>) – 3 element list of bin edges for landslide
hazard alert between Green and Yellow, Yellow and Orange, and
Orange and Red.</p></li>
<li><p><strong>popbinLS</strong> (<em>list</em>) – same as above but for population exposure</p></li>
<li><p><strong>hazbinLQ</strong> (<em>list</em>) – 3 element list of bin edges for liquefaction hazard
alert between Green and Yellow, Yellow and Orange, and Orange
and Red.</p></li>
<li><p><strong>popbinLQ</strong> (<em>list</em>) – same as above but for population exposure</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>tuple: (hazLS, popLS, hazLQ, popLQ, LS, LQ) where:</dt><dd><ul class="simple">
<li><p>hazLS: the landslide hazard alert level (str)</p></li>
<li><p>popLS: the landslide population alert level (str)</p></li>
<li><p>hazLQ: the liquefaction hazard alert level (str)</p></li>
<li><p>popLQ: the liquefaction population alert level (str)</p></li>
<li><p>LS: the overall landslide alert level (str)</p></li>
<li><p>LQ: the overall liquefaction alert level (str)</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Returns</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.view_database">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">view_database</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">database</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">endtime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">minmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eventids</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">realtime</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">currentonly</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">numevents</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LShazmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LShazmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LSpopmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LSpopmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LQhazmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LQhazmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LQpopmin</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">LQpopmax</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">printcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">csvfile</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">printsummary</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">printsuccess</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">printfailed</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">printnotmet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">maxcolwidth</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">alertreport</span><span class="o">=</span><span class="default_value">'value'</span></em>, <em class="sig-param"><span class="n">realtime_maxsec</span><span class="o">=</span><span class="default_value">86400.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#view_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.view_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints out information from the ground failure database based on
search criteria and other options. If nothing is defined except the
database, it will print out a summary and details on the successful
event runs only.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<em>str</em>) – file path to event database (.db file)</p></li>
<li><p><strong>starttime</strong> (<em>str</em>) – earliest earthquake time to include in the search,
can be any string date recognizable by np.datetime</p></li>
<li><p><strong>endtime</strong> (<em>str</em>) – latest earthquake time to include in the search,
can be any string date recognizable by datetime</p></li>
<li><p><strong>minmag</strong> (<em>float</em>) – minimum magnitude to include in search</p></li>
<li><p><strong>maxmag</strong> (<em>float</em>) – maximum magnitude to include in search</p></li>
<li><p><strong>eventids</strong> (<em>list</em>) – list of specific event ids to include (optional)</p></li>
<li><p><strong>realtime</strong> (<em>bool</em>) – if True, will only include events that were run in
near real time (defined by delay time less than realtime_maxsec)</p></li>
<li><p><strong>currentonly</strong> (<em>bool</em>) – if True, will only include the most recent run
of each event</p></li>
<li><p><strong>numevents</strong> (<em>int</em>) – Include the numevents most recent events that meet
search criteria</p></li>
<li><p><strong>LShazmin</strong> – minimum landslide hazard alert color (‘green’, ‘yellow’,
‘orange’, ‘red’) or minimum hazard alert statistic value</p></li>
<li><p><strong>LShazmax</strong> – same as above but for maximum landslide hazard alert
value/color</p></li>
<li><p><strong>LSpopmin</strong> – same as above but for minimum landslide population alert
value/color</p></li>
<li><p><strong>LSpopmax</strong> – same as above but for maximum landslide population alert
value/color</p></li>
<li><p><strong>LQhazmin</strong> – same as above but for minimum liquefaction hazard alert
value/color</p></li>
<li><p><strong>LQhazmax</strong> – same as above but for maximum liquefaction hazard alert
value/color</p></li>
<li><p><strong>LQpopmin</strong> – same as above but for minimum liquefaction population alert
value/color</p></li>
<li><p><strong>LQpopmax</strong> – same as above but for maximum liquefaction population alert
value/color</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – if True, will print all columns (overridden if
printcols is assigned)</p></li>
<li><p><strong>printcols</strong> (<em>list</em>) – List of columns to print out (choose from id,
eventcode, shakemap_version, note, version, lat, lon, depth,
time, mag, location, starttime, endtime, eventdir,
finitefault, HaggLS, ExpPopLS, HaggLQ, ExpPopLQ</p></li>
<li><p><strong>csvfile</strong> – If defined, saves csvfile of table of all events found
(includes all fields and failed/non-runs)</p></li>
<li><p><strong>printsummary</strong> (<em>bool</em>) – if True (default), will print summary of events
found to screen</p></li>
<li><p><strong>printsuccess</strong> (<em>bool</em>) – if True (default), will print out database entries
for successful event runs found</p></li>
<li><p><strong>printfailed</strong> (<em>bool</em>) – if True (default False), will print out information
about failed event runs</p></li>
<li><p><strong>printnotmet</strong> (<em>bool</em>) – if True (default False), will print out information
about event runs that didn’t meet criteria to run ground failure</p></li>
<li><p><strong>maxcolwidth</strong> (<em>int</em>) – maximum column width for printouts of database
entries.</p></li>
<li><p><strong>alertreport</strong> (<em>str</em>) – ‘value’ if values of alert statistics should be
printed, or ‘color’ if alert level colors should be printed</p></li>
<li><p><strong>realtime_maxsec</strong> (<em>float</em>) – if realtime is True, this is the maximum delay
between event time and processing end time in seconds
to consider an event to be run in realtime</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Prints summaries and database info to screen as requested, saves a
csv file if requested. Also returns a tuple where (success, fail,
notmet, stats, criteria) where</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>success: pandas dataframe of selected events that ran</dt><dd><p>successfully</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>fail: pandas dataframe of selected events that failed to run</dt><dd><p>due to an error</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>notmet: pandas dataframe of selected events that failed to run</dt><dd><p>because they did not meet the criteria to run ground failure</p>
</dd>
</dl>
</li>
<li><dl>
<dt>stats: dictionary containing statistics summarizing selected</dt><dd><p>events where
* aLSg/y/o/r is the number of overall alerts of green/yellow</p>
<blockquote>
<div><p>orange or red for landslides. If LS is replaced with LQ,
it is the same but for liquefaction.</p>
</div></blockquote>
<ul class="simple">
<li><p>hazLSg/y/o/r same as above but for hazard alert level totals</p></li>
<li><dl class="simple">
<dt>popLSg/y/o/r same as above but for population alert level</dt><dd><p>totals</p>
</dd>
</dl>
</li>
<li><p>nsuccess is the number of events that ran successfully</p></li>
<li><p>nfail is the number of events that failed to run</p></li>
<li><dl class="simple">
<dt>nnotmet is the number of events that didn’t run because they</dt><dd><p>did not meet criteria to run ground failure</p>
</dd>
</dl>
</li>
<li><p>nunique is the number of unique earthquake events run</p></li>
<li><dl class="simple">
<dt>nunique_success is the number of unique earthquake events</dt><dd><p>that ran successfully</p>
</dd>
</dl>
</li>
<li><p>nrealtime is the number of events that ran in near-real-time</p></li>
<li><dl class="simple">
<dt>delay_median_s is the median delay time for near-real-time</dt><dd><p>events (earthquake time until first GF run), also the same
for mean, min, max, and standard deviation</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>criteria: dictionary containing info on what criteria were used</dt><dd><p>for the search</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.alert_summary">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">alert_summary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">database</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">endtime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">minmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">realtime</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">currentonly</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">filebasename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">summarytypes</span><span class="o">=</span><span class="default_value">'all'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#alert_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.alert_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Print summary plot of alerts that have been issued for set of events met
by defined criteria</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<em>str</em>) – file path to event database (.db file)</p></li>
<li><p><strong>starttime</strong> (<em>str</em>) – earliest earthquake time to include in the search,
can be any string date recognizable by np.datetime</p></li>
<li><p><strong>endtime</strong> (<em>str</em>) – latest earthquake time to include in the search,
can be any string date recognizable by datetime</p></li>
<li><p><strong>minmag</strong> (<em>float</em>) – minimum magnitude to include in search</p></li>
<li><p><strong>maxmag</strong> (<em>float</em>) – maximum magnitude to include in search</p></li>
<li><p><strong>realtime</strong> (<em>bool</em>) – if True, will only include events that were run in
near real time (defined by delay time less than realtime_maxsec)</p></li>
<li><p><strong>currentonly</strong> (<em>bool</em>) – if True, will only include the most recent run
of each event</p></li>
<li><p><strong>filebasename</strong> (<em>str</em>) – If defined, will save a file with a modified
version of this name depending on which alert is displayed, if no
path is given it will save in current directory.</p></li>
<li><p><strong>summarytypes</strong> (<em>str</em>) – if ‘all’, will create three figures, one for
overall alerts, one for hazard alerts, and one for population
alerts. If ‘overall’, ‘hazard’, or ‘population’ it will create
just the one selected.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Figures showing alert level summaries</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.plot_evolution">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">plot_evolution</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">database</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">endtime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">minmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eventids</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filebasename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">changeonly</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">percrange</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#plot_evolution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.plot_evolution" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Make a plot and print stats showing delay times and changes in alert</dt><dd><p>statistics over time</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<em>str</em>) – file path to event database (.db file)</p></li>
<li><p><strong>starttime</strong> (<em>str</em>) – earliest earthquake time to include in the search,
can be any string date recognizable by np.datetime</p></li>
<li><p><strong>endtime</strong> (<em>str</em>) – latest earthquake time to include in the search,
can be any string date recognizable by datetime</p></li>
<li><p><strong>minmag</strong> (<em>float</em>) – minimum magnitude to include in search</p></li>
<li><p><strong>maxmag</strong> (<em>float</em>) – maximum magnitude to include in search</p></li>
<li><p><strong>eventids</strong> (<em>list</em>) – list of specific event ids to include (optional)</p></li>
<li><p><strong>filebasename</strong> (<em>str</em>) – If defined, will save a file with a modified
version of this name depending on which alert is displayed, if no
path is given it will save in current directory.</p></li>
<li><p><strong>changeonly</strong> (<em>bool</em>) – if True will only show events that changed alert
level at least once in the time evolution plots (unless eventids
are defined, then all will show)</p></li>
<li><p><strong>percrange</strong> – percentile to use for error bars to show uncertainty
as value &lt;1 (e.g., 0.95). If None, errors will not be shown</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Figures showing alert changes over time and delay and alert change</dt><dd><p>statistics</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.time_delays">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">time_delays</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">database</span></em>, <em class="sig-param"><span class="n">starttime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">endtime</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">minmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maxmag</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">eventids</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">filebasename</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#time_delays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.time_delays" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Make a plot and print stats showing delay times and changes in alert</dt><dd><p>statistics over time</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<em>str</em>) – file path to event database (.db file)</p></li>
<li><p><strong>starttime</strong> (<em>str</em>) – earliest earthquake time to include in the search,
can be any string date recognizable by np.datetime</p></li>
<li><p><strong>endtime</strong> (<em>str</em>) – latest earthquake time to include in the search,
can be any string date recognizable by datetime</p></li>
<li><p><strong>minmag</strong> (<em>float</em>) – minimum magnitude to include in search</p></li>
<li><p><strong>maxmag</strong> (<em>float</em>) – maximum magnitude to include in search</p></li>
<li><p><strong>eventids</strong> (<em>list</em>) – list of specific event ids to include (optional)</p></li>
<li><p><strong>filebasename</strong> (<em>str</em>) – If defined, will save a file with a modified
version of this name depending on which alert is displayed, if no
path is given it will save in current directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Figure showing delay and alert change statistics</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.plot_uncertainty">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">plot_uncertainty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">database</span></em>, <em class="sig-param"><span class="n">eventid</span></em>, <em class="sig-param"><span class="n">currentonly</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">filebasename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bars</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">percrange</span><span class="o">=</span><span class="default_value">0.95</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#plot_uncertainty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.plot_uncertainty" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Make a plot and print stats showing delay times and changes in alert</dt><dd><p>statistics over time</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database</strong> (<em>str</em>) – file path to event database (.db file)</p></li>
<li><p><strong>eventid</strong> (<em>str</em>) – event ids to plot</p></li>
<li><p><strong>currentonly</strong> (<em>bool</em>) – if True, will only plot newest version, if False
will plot all versions with different colors</p></li>
<li><p><strong>filebasename</strong> (<em>str</em>) – If defined, will save a file with a modified
version of this name depending on which alert is displayed, if no
path is given it will save in current directory.</p></li>
<li><p><strong>bars</strong> (<em>bool</em>) – if True, will use bars spanning percrange</p></li>
<li><p><strong>percrange</strong> (<em>float</em>) – percentile to use for error bars to show uncertainty
as value &lt;1 (e.g., 0.95).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Figure showing uncertainty</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.alert_rectangles">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">alert_rectangles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ax</span></em>, <em class="sig-param"><span class="n">bins</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#alert_rectangles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.alert_rectangles" title="Permalink to this definition">¶</a></dt>
<dd><p>Function used to color bin levels in background of axis</p>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.get_rangebeta">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">get_rangebeta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em>, <em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">prob</span><span class="o">=</span><span class="default_value">0.95</span></em>, <em class="sig-param"><span class="n">minlim</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">maxlim</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#get_rangebeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.get_rangebeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Get endpoints of the range of the specified beta function that contain
prob percent of the distribution</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> (<em>float</em>) – p shape factor of beta distribution (a in scipy)</p></li>
<li><p><strong>q</strong> (<em>float</em>) – q shape factor of beta distribution (b in scipy)</p></li>
<li><p><strong>prob</strong> (<em>float</em>) – central probability of distribution to return the range
of. Value from 0 to 1</p></li>
<li><p><strong>minlim</strong> (<em>float</em>) – minimum possible value of distribution</p></li>
<li><p><strong>maxlim</strong> (<em>float</em>) – maximum possible value of distribution</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns: tuple (valmin, valmax) where:</dt><dd><ul class="simple">
<li><p>valmin (float): lower edge of range containing prob</p></li>
<li><p>valmax (float): upper edge of range containing prob</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="gfail.utilities.get_pdfbeta">
<code class="sig-prename descclassname">gfail.utilities.</code><code class="sig-name descname">get_pdfbeta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">p</span></em>, <em class="sig-param"><span class="n">q</span></em>, <em class="sig-param"><span class="n">binedges</span></em>, <em class="sig-param"><span class="n">minlim</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">maxlim</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">npts</span><span class="o">=</span><span class="default_value">1000</span></em>, <em class="sig-param"><span class="n">openends</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gfail/utilities.html#get_pdfbeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gfail.utilities.get_pdfbeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Return discretized pdf for plotting curve and report probabilities of
each bin</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> (<em>float</em>) – p shape factor of beta distribution (a in scipy)</p></li>
<li><p><strong>q</strong> (<em>float</em>) – q shape factor of beta distribution (b in scipy)</p></li>
<li><p><strong>binedges</strong> (<em>list</em>) – list of bin edges</p></li>
<li><p><strong>minlim</strong> (<em>float</em>) – minimum possible value of distribution</p></li>
<li><p><strong>maxlim</strong> (<em>float</em>) – maximum possible value of distribution</p></li>
<li><p><strong>npts</strong> (<em>int</em>) – number of points to return in xvals</p></li>
<li><p><strong>openends</strong> (<em>bool</em>) – assumes lower and upper bins don’t have hard edges</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Returns: tuple of (xvals, yvals, probs) where:</dt><dd><ul class="simple">
<li><p>xvals: list of log-distributed values</p></li>
<li><p>yvals: corresponding list of</p></li>
<li><dl class="simple">
<dt>probs (list): list of len(binedges)-1 that gives probability of</dt><dd><p>value falling in the corresponding bin</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">groundfailure</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="gfail.html">gfail</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gfail.conf.html">gfail.conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.gfailrun.html">gfail.gfailrun</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.godt.html">gfail.godt</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.logisticmodel.html">gfail.logisticmodel</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.pdl.html">gfail.pdl</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.spatial.html">gfail.spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.stats.html">gfail.stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.temphdf.html">gfail.temphdf</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.transfer.html">gfail.transfer</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">gfail.utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="gfail.webpage.html">gfail.webpage</a></li>
</ul>
</li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
    </div>

    

    
  </body>
</html>